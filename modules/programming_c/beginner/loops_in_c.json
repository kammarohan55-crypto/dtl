{
    "module_header": {
        "module_title": "Loops in C",
        "subject": "Programming Using C",
        "level": "Beginner",
        "prerequisites": [
            "Control statements (if, if-else)",
            "Operators (increment, decrement, relational)",
            "Variables and data types",
            "Understanding of program flow"
        ],
        "learning_outcomes": [
            "Understand iteration and repetitive execution using loops",
            "Apply for loop for counter-controlled repetition with known iterations",
            "Use while loop for condition-controlled repetition with unknown iterations",
            "Implement do-while loop for post-test loops (executes at least once)",
            "Apply break statement to exit loops prematurely",
            "Use continue statement to skip current iteration and proceed to next",
            "Apply nested loops for multi-dimensional iteration patterns"
        ]
    },
    "definition": "Loops enable repetitive execution of code blocks while a condition remains true. The `for` loop uses counter for known iterations: `for (init; condition; increment) { statements; }`. The `while` loop pre-tests condition: `while (condition) { statements; }`, may execute zero times. The `do-while` loop post-tests: `do { statements; } while (condition);`, executes at least once. The `break` statement exits loop immediately; `continue` skips to next iteration.",
    "concept_overview": [
        "for loop: counter-controlled iteration for known number of repetitions. Syntax: `for (init; test; update) { body; }`. Compact, all loop control in one line.",
        "while loop: condition-controlled pre-test loop. Tests condition before each iteration. If initially false, body never executes. Syntax: `while (condition) { statements; }`",
        "do-while: post-test loop guarantees at least one execution. Tests condition after body. Syntax: `do { statements; } while (condition);`. Note semicolon after while.",
        "break: exits innermost loop immediately, resuming execution after loop. Useful for early termination when target found or error detected.",
        "continue: skips remaining statements in current iteration, proceeds to next iteration. Useful for filtering or skipping special cases.",
        "Nested loops: loop inside another loop. Outer loop iterations each trigger complete inner loop execution. Used for matrices, patterns, multi-dimensional data.",
        "Infinite loop: loop with never-false condition `while(1)` or `for(;;)`. Requires break for exit. Used in embedded systems for event loops."
    ],
    "theory": [
        "Loops are fundamental programming constructs enabling automation of repetitive tasks, from simple counting to complex data processing algorithms. Without loops, processing arrays, searching data, generating patterns, or responding to continuous input would require manually duplicating code—impractical and error-prone. Loops embody the DRY principle (Don't Repeat Yourself): write logic once, execute repeatedly. The three loop types—for, while, do-while—serve distinct patterns: for suits counter-based iteration with known bounds (1 to 100, array traversal), while suits condition-based iteration with unknown duration (until user enters 'quit', until target found), do-while suits scenarios requiring at least one execution (menu systems, input validation). Understanding when to use each loop type, how to construct proper loop conditions, and how to avoid infinite loops develops essential algorithmic thinking. Mastery enables processing data structures efficiently, implementing algorithms, and creating responsive interactive programs.",
        "The fundamental loop structures each have specific characteristics and use cases. The `for` loop syntax `for (init; condition; update)` concentrates all loop control in one line: initialization runs once before loop starts, condition tests before each iteration (false exits loop), update executes after each iteration. Example: `for (int i = 0; i < 10; i++)` initializes counter i to 0, continues while i < 10, increments i after each iteration—executes body 10 times (i from 0 to 9). The while loop `while (condition) { body; }` tests condition before each iteration, executing body zero or more times. Example: `while (scanf(\"%d\", &x) == 1)` continues reading integers until non-integer encountered or EOF. The do-while loop `do { body; } while (condition);` tests condition after body, guaranteeing at least one execution. Example: `do { printf(\"Menu...\"); } while (choice != 0);` displays menu at least once. The break statement `break;` exits the innermost enclosing loop immediately, useful when search succeeds or error occurs. The continue statement `continue;` skips remaining iteration statements, proceeding to next iteration's condition test, useful for filtering. Nested loops place one loop inside another: outer loop's each iteration triggers complete inner loop execution. Example: `for (int i = 0; i < 3; i++) { for (int j = 0; j < 4; j++) { } }` executes inner body 12 times (3 × 4). Infinite loops `while(1)` or `for(;;)` run indefinitely until break or return, used in embedded systems for event loops.",
        "Mastery of loops is critically important because iteration underpins virtually all non-trivial computation: data structure traversal, numerical algorithms, searching and sorting, event processing, and user interaction. Correct loop design prevents common errors: off-by-one errors (iterating n+1 or n-1 instead of n times), infinite loops (condition never becomes false), and uninitialized/incorrect update expressions. Understanding loop invariants—conditions that remain true throughout loop execution—enables reasoning about correctness. Performance considerations matter: minimizing loop overhead, avoiding redundant calculations inside loops, and choosing appropriate iteration constructs affect efficiency. In array processing, loops access elements sequentially: `for (int i = 0; i < size; i++) process(arr[i]);`. In searching, loops continue until target found or exhausted: `while (i < n && arr[i] != target) i++;`. In numerical algorithms, loops implement iterations until convergence: `while (fabs(new - old) > epsilon)`. In embedded systems, infinite loops manage continuous operation: `while(1) { checkSensors(); updateActuators(); }`. Understanding loop control flow enables debugging: tracing iteration count, inspecting variables at each iteration, identifying why loops exit or don't. In examinations, demonstrating appropriate loop selection, correct initialization/condition/update, and proper use of break/continue shows programming competence."
    ],
    "mathematical_formulation": [
        {
            "formula": "for loop syntax: `for (init; condition; update) { body; }`",
            "explanation": "Executes init once, then repeats: test condition, execute body, execute update. Exits when condition false."
        },
        {
            "formula": "while loop syntax: `while (condition) { body; }`",
            "explanation": "Pre-test loop: tests condition before each iteration. May execute zero times."
        },
        {
            "formula": "do-while syntax: `do { body; } while (condition);`",
            "explanation": "Post-test loop: executes body, then tests condition. Guarantees at least one execution."
        },
        {
            "formula": "Sum of first n numbers: $S = \\sum_{i=1}^{n} i = \\frac{n(n+1)}{2}$",
            "explanation": "Loop implementation: `for (i=1; i<=n; i++) sum += i;`"
        },
        {
            "formula": "Factorial: $n! = \\prod_{i=1}^{n} i = 1 \\times 2 \\times \\cdots \\times n$",
            "explanation": "Loop: `fact = 1; for (i=1; i<=n; i++) fact *= i;`"
        }
    ],
    "worked_examples": [
        {
            "difficulty": "Basic",
            "problem": "Write a program to print numbers 1 to 10 using a for loop.",
            "solution_steps": [
                "```c",
                "#include <stdio.h>",
                "",
                "int main() {",
                "    // for loop: init i=1, continue while i<=10, increment i",
                "    for (int i = 1; i <= 10; i++) {",
                "        printf(\"%d \", i);",
                "    }",
                "    printf(\"\\n\");",
                "    return 0;",
                "}",
                "```",
                "**Output**: 1 2 3 4 5 6 7 8 9 10"
            ],
            "final_answer": "for loop with i from 1 to 10, increments each iteration"
        },
        {
            "difficulty": "Intermediate",
            "problem": "Calculate factorial of a number using while loop.",
            "solution_steps": [
                "```c",
                "#include <stdio.h>",
                "",
                "int main() {",
                "    int n, i = 1;",
                "    long factorial = 1;",
                "    ",
                "    printf(\"Enter number: \");",
                "    scanf(\"%d\", &n);",
                "    ",
                "    while (i <= n) {",
                "        factorial *= i;  // Multiply by current i",
                "        i++;             // Increment i",
                "    }",
                "    ",
                "    printf(\"Factorial of %d = %ld\\n\", n, factorial);",
                "    return 0;",
                "}",
                "```",
                "**Example**: For n=5, factorial = 1*2*3*4*5 = 120"
            ],
            "final_answer": "while loop multiplies factorial by each number from 1 to n"
        },
        {
            "difficulty": "Intermediate",
            "problem": "Demonstrate difference between while and do-while for input validation.",
            "solution_steps": [
                "```c",
                "#include <stdio.h>",
                "",
                "int main() {",
                "    int num;",
                "    ",
                "    // do-while: prompts at least once",
                "    do {",
                "        printf(\"Enter positive number: \");",
                "        scanf(\"%d\", &num);",
                "    } while (num <= 0);",
                "    ",
                "    printf(\"You entered: %d\\n\", num);",
                "    return 0;",
                "}",
                "```",
                "**Key**: do-while ensures menu/prompt displays at least once.",
                "With while, initial check might prevent first prompt."
            ],
            "final_answer": "do-while guarantees at least one execution, ideal for menus and validation"
        }
    ],
    "logical_derivation": "Loop structures derive from the need to automate repetition in algorithms. The while loop maps directly to mathematical iteration: while condition P holds, perform action A. The for loop optimizes counter-based patterns common in mathematics (sum from i=1 to n) by consolidating initialization, test, and increment. The do-while loop handles scenarios where action must occur before test, matching real-world patterns like 'try opening file, if failed, ask for new filename'. Break and continue provide early exit and filtering, implementing algorithmic optimizations: early termination when searching (break when found), skipping invalid cases (continue for negative input in positive-only processing). Nested loops implement Cartesian products: for each i in I, for each j in J, compute f(i,j)—essential for matrices and multi-dimensional structures.",
    "applications": [
        "**Array Processing**: Iterating through array elements for searching, sorting, summing.",
        "**Pattern Printing**: Nested loops for printing pyramids, matrices, multiplication tables.",
        "**Numerical Computation**: Calculating factorials, Fibonacci sequences, series sums.",
        "**Input Validation**: do-while loops for prompting until valid input received.",
        "**Menu Systems**: Infinite loops with break on exit choice for interactive menus.",
        "**Searching**: Loops to traverse data until target found or exhausted.",
        "**Embedded Systems**: Infinite event loops continuously monitoring sensors and updating actuators."
    ],
    "key_takeaways": [
        "for loop: counter-controlled, known iterations. Syntax: `for (init; test; update) { body; }`",
        "while loop: pre-test, condition-controlled. May execute zero times. Syntax: `while (condition) { body; }`",
        "do-while: post-test, guarantees at least one execution. Syntax: `do { body; } while (condition);` Note semicolon.",
        "break: exits innermost loop immediately. continue: skips to next iteration.",
        "Nested loops: loop inside loop. Outer iteration triggers complete inner loop execution.",
        "Infinite loop: `while(1)` or `for(;;)`. Requires break for exit. Used in event loops.",
        "Loop selection: for when iterations known, while when unknown, do-while when at least one execution needed."
    ],
    "common_mistakes": [
        {
            "mistake": "Off-by-one errors in loop bounds",
            "why_it_occurs": "Students write `for (i=1; i<=10; i++)` when wanting 0-9 or vice versa.",
            "how_to_avoid": "Clear specification: 'n times' → `for (i=0; i<n; i++)`. 'inclusive 1 to n' → `for (i=1; i<=n; i++)`"
        },
        {
            "mistake": "Infinite loops due to never-false condition",
            "why_it_occurs": "Students write `while (x > 0)` but never modify x inside loop.",
            "how_to_avoid": "Ensure loop variable is modified toward termination condition. Check condition will eventually become false."
        },
        {
            "mistake": "Using uninitialized loop counter",
            "why_it_occurs": "Students write `for (i=0; ...; i++)` but i not declared.",
            "how_to_avoid": "Declare loop variable: `for (int i=0; ...) ` or declare before loop: `int i; for (i=0; ...)`"
        },
        {
            "mistake": "Forgetting semicolon after do-while",
            "why_it_occurs": "Students write `do { } while (cond)` without final semicolon.",
            "how_to_avoid": "do-while requires semicolon: `do { } while (condition);` Unlike for and while."
        },
        {
            "mistake": "Modifying loop counter inside for loop body",
            "why_it_occurs": "Students do `for (i=0; i<10; i++) { i++; }` causing unexpected behavior.",
            "how_to_avoid": "Avoid modifying loop counter inside body. Let for loop's update clause handle it."
        },
        {
            "mistake": "Using = instead of == in loop condition",
            "why_it_occurs": "Students write `while (x = 5)` instead of `while (x == 5)`.",
            "how_to_avoid": "= assigns (often creating infinite loop), == compares. Use == in conditions."
        },
        {
            "mistake": "break/continue in wrong loop (nested)",
            "why_it_occurs": "In nested loops, students expect break to exit outer loop but it exits innermost.",
            "how_to_avoid": "break/continue affect only innermost loop. Use flags or goto for breaking outer loops."
        }
    ],
    "quiz": [
        {
            "question": "Which loop guarantees at least one execution?",
            "options": [
                "`do-while`",
                "`while`",
                "`for`",
                "All of them"
            ],
            "correct_answer": 0,
            "explanation": "do-while is post-test: executes body first, then tests condition. Guarantees at least one execution."
        },
        {
            "question": "In `for (int i = 0; i < 5; i++)`, how many times does the loop execute?",
            "options": [
                "5 times",
                "4 times",
                "6 times",
                "Infinite"
            ],
            "correct_answer": 0,
            "explanation": "i starts at 0, continues while i<5, increments each time. Executes for i=0,1,2,3,4 (5 times)."
        },
        {
            "question": "What does `break` do in a loop?",
            "options": [
                "Exits the loop immediately",
                "Skips to next iteration",
                "Pauses the loop",
                "Restarts the loop"
            ],
            "correct_answer": 0,
            "explanation": "break exits the innermost enclosing loop immediately, resuming execution after the loop."
        },
        {
            "question": "What does `continue` do?",
            "options": [
                "Skips remaining statements and proceeds to next iteration",
                "Exits the loop",
                "Continues execution normally",
                "Repeats current iteration"
            ],
            "correct_answer": 0,
            "explanation": "continue skips remaining statements in current iteration, jumps to loop's condition test for next iteration."
        },
        {
            "question": "Which creates an infinite loop?",
            "options": [
                "`while (1)`",
                "`while (0)`",
                "`for (i=0; i<10; i++)`",
                "`do { } while (0);`"
            ],
            "correct_answer": 0,
            "explanation": "`while(1)` has always-true condition, creating infinite loop. `while(0)` never executes."
        },
        {
            "question": "What's the difference between while and do-while?",
            "options": [
                "while is pre-test, do-while is post-test",
                "while is faster",
                "do-while can't use break",
                "No difference"
            ],
            "correct_answer": 0,
            "explanation": "while tests condition before body (may execute zero times), do-while tests after (at least once)."
        },
        {
            "question": "Does `do { } while (condition);` need semicolon after while?",
            "options": [
                "Yes, required",
                "No, syntax error",
                "Optional",
                "Only for single statements"
            ],
            "correct_answer": 0,
            "explanation": "do-while requires semicolon after while: `do { } while (condition);` Unlike for and while loops."
        },
        {
            "question": "In nested loops, what does break affect?",
            "options": [
                "Only innermost loop",
                "All loops",
                "Only outermost loop",
                "The loop specified"
            ],
            "correct_answer": 0,
            "explanation": "break exits only the innermost enclosing loop. Outer loop continues normally."
        },
        {
            "question": "Which loop is best for iterating arrays when size is known?",
            "options": [
                "`for` loop",
                "`while` loop",
                "`do-while` loop",
                "All equally good"
            ],
            "correct_answer": 0,
            "explanation": "for loop ideal for counter-based iteration: `for (i=0; i<size; i++) process(arr[i]);`"
        },
        {
            "question": "What's the output of: `for (i=0; i<3; i++) printf(\"%d\", i);`",
            "options": [
                "012",
                "123",
                "0123",
                "01"
            ],
            "correct_answer": 0,
            "explanation": "Loop executes for i=0, i=1, i=2 (i<3). Prints 012."
        },
        {
            "question": "When should you use do-while instead of while?",
            "options": [
                "When body must execute at least once",
                "When condition is complex",
                "For better performance",
                "For nested loops"
            ],
            "correct_answer": 0,
            "explanation": "Use do-while when body must execute at least once (menus, input validation) before testing condition."
        },
        {
            "question": "What makes a loop infinite?",
            "options": [
                "Condition that never becomes false",
                "Using break",
                "Using continue",
                "Too many iterations"
            ],
            "correct_answer": 0,
            "explanation": "Infinite loop occurs when condition remains true forever, either by design `while(1)` or bug (not updating loop variable)."
        }
    ],
    "ai_summary": {
        "key_ideas": [
            "for loop: counter-controlled for known iterations. Syntax: `for (init; test; update) { body; }`",
            "while loop: pre-test, condition-controlled. May execute zero times. Syntax: `while (condition) { body; }`",
            "do-while: post-test, guarantees at least one execution. Syntax: `do { body; } while (condition);` Needs semicolon.",
            "break: exits innermost loop immediately. continue: skips to next iteration.",
            "Common pattern: `for (int i=0; i<n; i++)` executes exactly n times (i from 0 to n-1).",
            "Off-by-one errors: 'n times' → i<n, 'inclusive 1 to n' → i<=n.",
            "Infinite loop: `while(1)` or `for(;;)`. Requires break for exit.",
            "Nested loops: inner loop completes fully for each outer iteration.",
            "do-while use case: menus, input validation (prompt at least once).",
            "Loop selection: for when iterations known, while when unknown, do-while when at least one needed."
        ],
        "important_formulas": [
            "for: `for (init; condition; update) { body; }`",
            "while: `while (condition) { body; }`",
            "do-while: `do { body; } while (condition);`",
            "Nested: `for (i...) { for (j...) { body; } }`"
        ],
        "common_exam_traps": [
            "Off-by-one: `for (i=0; i<=n; i++)` executes n+1 times, not n.",
            "Infinite loops: forgetting to update loop variable toward termination.",
            "Forgetting semicolon after do-while: `do{} while(condition);` needs semicolon.",
            "Using = instead of == in condition: `while (x=5)` assigns not compares.",
            "break in nested loops: only exits innermost loop, not outer."
        ],
        "exam_tip": "Remember: for loop for known iterations (i<n for n times). do-while needs semicolon after while. break exits loop, continue skips to next iteration. Off-by-one: use i<n for 0 to n-1."
    }
}